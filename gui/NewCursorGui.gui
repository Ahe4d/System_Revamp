//--- OBJECT WRITE BEGIN ---
new GuiControl(newCursorGui) {
   profile = "GuiDefaultProfile";
   horizSizing = "center";
   vertSizing = "center";
   position = "0 0";
   extent = "800 600";
   minExtent = "8 2";
   enabled = "1";
   visible = "1";
   clipToParent = "1";

   new GuiWindowCtrl(CursorGui) {
      profile = "GuiWindowProfile";
      horizSizing = "center";
      vertSizing = "center";
      position = "285 122";
      extent = "229 355";
      minExtent = "8 2";
      enabled = "1";
      visible = "1";
      clipToParent = "1";
      command = "canvas.popDialog(NewCursorGui);";
      accelerator = "escape";
      text = "Select your cursor";
      maxLength = "255";
      resizeWidth = "0";
      resizeHeight = "0";
      canMove = "1";
      canClose = "1";
      canMinimize = "0";
      canMaximize = "0";
      minSize = "50 50";
      closeCommand = "canvas.popDialog(NewCursorGui);";

      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 50";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(0);";
         text = "Normal cursor";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 260";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(7);";
         text = "Middle Finger";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 80";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(1);";
         text = "Mac cursor";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 110";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(2);";
         text = "New cursor";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 140";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(3);";
         text = "Black cursor";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 170";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(4);";
         text = "Blue cursor";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 200";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(5);";
         text = "Yellow cursor";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiRadioCtrl() {
         profile = "GuiRadioProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "7 230";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "NewCursorGui.setCursor(6);";
         text = "TOB cursor";
         groupNum = "5";
         buttonType = "RadioButton";
      };
      new GuiButtonCtrl() {
         profile = "BlockButtonProfile";
         horizSizing = "right";
         vertSizing = "bottom";
         position = "45 323";
         extent = "140 30";
         minExtent = "8 2";
         enabled = "1";
         visible = "1";
         clipToParent = "1";
         command = "canvas.popDialog(NewCursorGui);";
         text = "Done";
         groupNum = "-1";
         buttonType = "PushButton";
      };
   };
};
//--- OBJECT WRITE END ---


function newCursorGui::onWake(%this)
{
   %centerX = getWord($pref::Video::resolution,1) / 2 - getWord(%this.extent,1) / 2;
   CursorGui.position = %centerX SPC -900;
   CursorGui.tangoMoveTo("center", "1000", "elastic");
}

function newCursorGui::onSleep(%this)
{
   %centerX = getWord($pref::Video::resolution,1) / 2 - getWord(%this.extent,1) / 2;
   CursorGui.position = %centerX SPC -900;
}

function NewCursorGui::setCursor(%this, %cursor)
{
   if(%this !$= "newCursorGui")
   {
      warn("GUI is not open");
      return;
   }
   if(%cursor < 0 || %cursor > 7)
   {
      warn("This is not a cursor!");
      return;
   }
   $Pref::Cursor = %cursor;
   export("$Pref*","config/client/prefs.cs");
   messageBoxOK("A whole new wo--- Cursor!","You need to restart for the changes to take place!");
}